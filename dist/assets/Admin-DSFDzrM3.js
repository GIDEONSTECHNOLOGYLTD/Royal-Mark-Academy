import{r as e,j as a,v as s,Q as i,z as n,S as m,i as r,T as o,t as c,U as d,V as t,y as l,A as u,W as N,D as x,X as p,I as b,w as j,N as y,p as h,Y as g}from"./index-KcWcSXDh.js";function f({userRole:d}){const[t,l]=e.useState([]),[u,N]=e.useState(!0),[x,p]=e.useState(""),[b,j]=e.useState(null),[y,h]=e.useState(!1),[g,f]=e.useState(!1),[v,A]=e.useState(""),[C,U]=e.useState("applicationDate"),[k,D]=e.useState("desc");e.useEffect(()=>{(async()=>{try{const e=await fetch("/api/admin/applications",{credentials:"include"}),a=await e.json();a.success?l(a.data):p(a.message||"Failed to fetch applications")}catch(e){console.error("Error fetching applications:",e),p("Failed to connect to the server")}finally{N(!1)}})()},[]);const E=async(e,a)=>{if("admin"===d)try{f(!0);const s=await fetch(`/api/admin/applications/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a}),credentials:"include"}),i=await s.json();i.success?(l(t.map(s=>s._id===e?{...s,status:a}:s)),b&&b._id===e&&j({...b,status:a})):p(i.message||"Failed to update application status")}catch(s){console.error("Error updating application status:",s),p("Failed to connect to the server")}finally{f(!1)}},P=e=>{C===e?D("asc"===k?"desc":"asc"):(U(e),D("asc"))},V=t.filter(e=>[e.firstName,e.lastName,e.email,e.gradeApplying,e.parentName].join(" ").toLowerCase().includes(v.toLowerCase())).sort((e,a)=>{let s=e[C],i=a[C];return"applicationDate"===C&&(s=new Date(s),i=new Date(i)),"asc"===k?s>i?1:-1:s<i?1:-1}),w=e=>new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),S=({status:e})=>{switch(e){case"pending":return a.jsxDEV("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-800 flex items-center",children:[a.jsxDEV(n,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:138,columnNumber:108},this)," Pending"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:138,columnNumber:16},this);case"reviewed":return a.jsxDEV("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800 flex items-center",children:[a.jsxDEV(m,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:140,columnNumber:104},this)," Reviewed"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:140,columnNumber:16},this);case"accepted":return a.jsxDEV("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800 flex items-center",children:[a.jsxDEV(r,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:142,columnNumber:106},this)," Accepted"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:142,columnNumber:16},this);case"rejected":return a.jsxDEV("span",{className:"px-2 py-1 text-xs rounded bg-red-100 text-red-800 flex items-center",children:[a.jsxDEV(o,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:144,columnNumber:102},this)," Rejected"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:144,columnNumber:16},this);default:return a.jsxDEV("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-800",children:e},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:146,columnNumber:16},this)}};return u?a.jsxDEV("div",{className:"flex justify-center items-center py-10",children:a.jsxDEV("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-800"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:153,columnNumber:9},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:152,columnNumber:7},this):x?a.jsxDEV("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:a.jsxDEV("p",{className:"text-red-700",children:x},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:161,columnNumber:9},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:160,columnNumber:7},this):a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[a.jsxDEV("h2",{className:"text-xl font-bold text-gray-800",children:"Student Applications"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:169,columnNumber:9},this),a.jsxDEV("div",{className:"relative",children:[a.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsxDEV(s,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:172,columnNumber:13},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:171,columnNumber:11},this),a.jsxDEV("input",{type:"text",placeholder:"Search applications...",value:v,onChange:e=>A(e.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:174,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:170,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:168,columnNumber:7},this),0===t.length?a.jsxDEV("div",{className:"bg-gray-50 p-6 text-center border rounded-lg",children:a.jsxDEV("p",{className:"text-gray-600",children:"No applications found."},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:186,columnNumber:11},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:185,columnNumber:9},this):a.jsxDEV("div",{className:"overflow-x-auto",children:a.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsxDEV("thead",{className:"bg-gray-50",children:a.jsxDEV("tr",{children:[a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>P("applicationDate"),children:a.jsxDEV("div",{className:"flex items-center",children:["Date","applicationDate"===C&&a.jsxDEV(i,{className:"ml-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:201,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:198,columnNumber:19},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:193,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>P("lastName"),children:a.jsxDEV("div",{className:"flex items-center",children:["Student Name","lastName"===C&&a.jsxDEV(i,{className:"ml-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:213,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:210,columnNumber:19},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:205,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:217,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent/Guardian"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:220,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:223,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:226,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:192,columnNumber:15},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:191,columnNumber:13},this),a.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(e=>a.jsxDEV("tr",{className:"hover:bg-gray-50",children:[a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:w(e.applicationDate)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:234,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:[a.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:238,columnNumber:21},this),a.jsxDEV("div",{className:"text-xs text-gray-500",children:e.email},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:241,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:237,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.gradeApplying},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:243,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.parentName},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:246,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsxDEV(S,{status:e.status},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:250,columnNumber:21},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:249,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:a.jsxDEV("button",{onClick:()=>(e=>{j(e),h(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-2",children:"View Details"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:253,columnNumber:21},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:252,columnNumber:19},this)]},e._id,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:233,columnNumber:17},this))},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:231,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:190,columnNumber:11},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:189,columnNumber:9},this),y&&b&&a.jsxDEV("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxDEV("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsxDEV("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>h(!1)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:271,columnNumber:13},this),a.jsxDEV("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:272,columnNumber:13},this),a.jsxDEV("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsxDEV("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:a.jsxDEV("div",{className:"sm:flex sm:items-start",children:a.jsxDEV("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[a.jsxDEV("div",{className:"flex justify-between items-center",children:[a.jsxDEV("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Application Details"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:278,columnNumber:23},this),a.jsxDEV(S,{status:b.status},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:281,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:277,columnNumber:21},this),a.jsxDEV("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxDEV("div",{children:[a.jsxDEV("h4",{className:"text-sm font-medium text-gray-500",children:"Student Information"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:285,columnNumber:25},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[a.jsxDEV("span",{className:"font-medium",children:"Name:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:287,columnNumber:27},this)," ",b.firstName," ",b.lastName]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:286,columnNumber:25},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[a.jsxDEV("span",{className:"font-medium",children:"Date of Birth:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:290,columnNumber:27},this)," ",b.dob?w(b.dob):"Not provided"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:289,columnNumber:25},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[a.jsxDEV("span",{className:"font-medium",children:"Grade Applying For:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:293,columnNumber:27},this)," ",b.gradeApplying]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:292,columnNumber:25},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[a.jsxDEV("span",{className:"font-medium",children:"Current School:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:296,columnNumber:27},this)," ",b.currentSchool||"Not provided"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:295,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:284,columnNumber:23},this),a.jsxDEV("div",{children:[a.jsxDEV("h4",{className:"text-sm font-medium text-gray-500",children:"Parent/Guardian Information"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:300,columnNumber:25},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[a.jsxDEV("span",{className:"font-medium",children:"Name:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:302,columnNumber:27},this)," ",b.parentName]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:301,columnNumber:25},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[a.jsxDEV("span",{className:"font-medium",children:"Email:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:305,columnNumber:27},this)," ",b.email]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:304,columnNumber:25},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[a.jsxDEV("span",{className:"font-medium",children:"Phone:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:308,columnNumber:27},this)," ",b.phone]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:307,columnNumber:25},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[a.jsxDEV("span",{className:"font-medium",children:"Address:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:311,columnNumber:27},this)," ",b.address||"Not provided"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:310,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:299,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:283,columnNumber:21},this),a.jsxDEV("div",{className:"mt-4",children:[a.jsxDEV("h4",{className:"text-sm font-medium text-gray-500",children:"Additional Information"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:317,columnNumber:23},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:b.message||"No additional information provided."},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:318,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:316,columnNumber:21},this),a.jsxDEV("div",{className:"mt-4",children:[a.jsxDEV("h4",{className:"text-sm font-medium text-gray-500",children:"Application Submitted"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:324,columnNumber:23},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:[w(b.applicationDate)," at ",new Date(b.applicationDate).toLocaleTimeString()]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:325,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:323,columnNumber:21},this),"admin"===d&&a.jsxDEV("div",{className:"mt-6 bg-gray-50 p-4 rounded-lg",children:[a.jsxDEV("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Update Application Status"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:332,columnNumber:25},this),a.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[a.jsxDEV("button",{onClick:()=>E(b._id,"pending"),disabled:"pending"===b.status||g,className:`px-3 py-1 text-xs rounded-md flex items-center ${"pending"===b.status?"bg-yellow-100 text-yellow-800 cursor-default":"bg-yellow-500 text-white hover:bg-yellow-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsxDEV(n,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:343,columnNumber:29},this)," Mark Pending"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:334,columnNumber:27},this),a.jsxDEV("button",{onClick:()=>E(b._id,"reviewed"),disabled:"reviewed"===b.status||g,className:`px-3 py-1 text-xs rounded-md flex items-center ${"reviewed"===b.status?"bg-blue-100 text-blue-800 cursor-default":"bg-blue-500 text-white hover:bg-blue-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsxDEV(m,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:354,columnNumber:29},this)," Mark Reviewed"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:345,columnNumber:27},this),a.jsxDEV("button",{onClick:()=>E(b._id,"accepted"),disabled:"accepted"===b.status||g,className:`px-3 py-1 text-xs rounded-md flex items-center ${"accepted"===b.status?"bg-green-100 text-green-800 cursor-default":"bg-green-500 text-white hover:bg-green-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsxDEV(r,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:365,columnNumber:29},this)," Accept"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:356,columnNumber:27},this),a.jsxDEV("button",{onClick:()=>E(b._id,"rejected"),disabled:"rejected"===b.status||g,className:`px-3 py-1 text-xs rounded-md flex items-center ${"rejected"===b.status?"bg-red-100 text-red-800 cursor-default":"bg-red-500 text-white hover:bg-red-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsxDEV(o,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:376,columnNumber:29},this)," Reject"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:367,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:333,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:331,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:276,columnNumber:19},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:275,columnNumber:17},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:274,columnNumber:15},this),a.jsxDEV("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[a.jsxDEV("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:()=>h(!1),children:"Close"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:385,columnNumber:17},this),a.jsxDEV("button",{type:"button",className:"mt-3 mr-2 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:()=>window.print(),children:[a.jsxDEV(c,{className:"mr-2"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:397,columnNumber:19},this)," Export"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:392,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:384,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:273,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:270,columnNumber:11},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:269,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminApplications.jsx",lineNumber:167,columnNumber:5},this)}function v(){const[n,m]=e.useState([]),[r,o]=e.useState(!0),[c,u]=e.useState(""),[N,x]=e.useState(null),[p,b]=e.useState(!1),[j,y]=e.useState(""),[h,g]=e.useState("date"),[f,v]=e.useState("desc"),[A,C]=e.useState(!1);e.useEffect(()=>{(async()=>{try{const e=await fetch("/api/admin/contacts",{credentials:"include"}),a=await e.json();a.success?m(a.data):u(a.message||"Failed to fetch contacts")}catch(e){console.error("Error fetching contacts:",e),u("Failed to connect to the server")}finally{o(!1)}})()},[]);const U=e=>{h===e?v("asc"===f?"desc":"asc"):(g(e),v("asc"))},k=n.filter(e=>[e.name,e.email,e.subject,e.message].join(" ").toLowerCase().includes(j.toLowerCase())).sort((e,a)=>{let s=e[h],i=a[h];return"date"===h&&(s=new Date(s),i=new Date(i)),"asc"===f?s>i?1:-1:s<i?1:-1}),D=e=>new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return r?a.jsxDEV("div",{className:"flex justify-center items-center py-10",children:a.jsxDEV("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-800"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:133,columnNumber:9},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:132,columnNumber:7},this):c?a.jsxDEV("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:a.jsxDEV("p",{className:"text-red-700",children:c},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:141,columnNumber:9},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:140,columnNumber:7},this):a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[a.jsxDEV("h2",{className:"text-xl font-bold text-gray-800",children:"Contact Messages"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:149,columnNumber:9},this),a.jsxDEV("div",{className:"relative",children:[a.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsxDEV(s,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:152,columnNumber:13},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:151,columnNumber:11},this),a.jsxDEV("input",{type:"text",placeholder:"Search messages...",value:j,onChange:e=>y(e.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:154,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:150,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:148,columnNumber:7},this),0===n.length?a.jsxDEV("div",{className:"bg-gray-50 p-6 text-center border rounded-lg",children:a.jsxDEV("p",{className:"text-gray-600",children:"No contact messages found."},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:166,columnNumber:11},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:165,columnNumber:9},this):a.jsxDEV("div",{className:"overflow-x-auto",children:a.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsxDEV("thead",{className:"bg-gray-50",children:a.jsxDEV("tr",{children:[a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>U("date"),children:a.jsxDEV("div",{className:"flex items-center",children:["Date","date"===h&&a.jsxDEV(i,{className:"ml-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:181,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:178,columnNumber:19},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:173,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>U("name"),children:a.jsxDEV("div",{className:"flex items-center",children:["From","name"===h&&a.jsxDEV(i,{className:"ml-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:193,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:190,columnNumber:19},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:185,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>U("subject"),children:a.jsxDEV("div",{className:"flex items-center",children:["Subject","subject"===h&&a.jsxDEV(i,{className:"ml-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:205,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:202,columnNumber:19},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:197,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:209,columnNumber:17},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:212,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:172,columnNumber:15},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:171,columnNumber:13},this),a.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>a.jsxDEV("tr",{className:"hover:bg-gray-50 "+(e.responded?"":"font-semibold"),children:[a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:D(e.date)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:223,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:[a.jsxDEV("div",{className:"text-sm font-inherit text-gray-900",children:e.name},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:227,columnNumber:21},this),a.jsxDEV("div",{className:"text-xs text-gray-500",children:e.email},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:230,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:226,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.subject},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:232,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:e.responded?a.jsxDEV("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800 flex items-center",children:[a.jsxDEV(d,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:238,columnNumber:25},this)," Responded"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:237,columnNumber:23},this):a.jsxDEV("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-800 flex items-center",children:[a.jsxDEV(t,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:242,columnNumber:25},this)," Awaiting Response"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:241,columnNumber:23},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:235,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:a.jsxDEV("button",{onClick:()=>(e=>{x(e),b(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-2",children:"View Details"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:247,columnNumber:21},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:246,columnNumber:19},this)]},e._id,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:219,columnNumber:17},this))},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:217,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:170,columnNumber:11},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:169,columnNumber:9},this),p&&N&&a.jsxDEV("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxDEV("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsxDEV("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>b(!1)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:265,columnNumber:13},this),a.jsxDEV("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:266,columnNumber:13},this),a.jsxDEV("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[a.jsxDEV("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:a.jsxDEV("div",{className:"sm:flex sm:items-start",children:[a.jsxDEV("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsxDEV(l,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:271,columnNumber:21},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:270,columnNumber:19},this),a.jsxDEV("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[a.jsxDEV("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Message from ",N.name]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:274,columnNumber:21},this),a.jsxDEV("div",{className:"mt-4",children:[a.jsxDEV("p",{className:"text-sm text-gray-500",children:[a.jsxDEV("strong",{children:"Email:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:280,columnNumber:25},this)," ",N.email]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:279,columnNumber:23},this),a.jsxDEV("p",{className:"text-sm text-gray-500",children:[a.jsxDEV("strong",{children:"Sent on:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:283,columnNumber:25},this)," ",D(N.date)," at ",new Date(N.date).toLocaleTimeString()]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:282,columnNumber:23},this),a.jsxDEV("p",{className:"text-sm text-gray-500",children:[a.jsxDEV("strong",{children:"Status:"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:286,columnNumber:25},this)," ",N.responded?"Responded":"Awaiting Response"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:285,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:278,columnNumber:21},this),a.jsxDEV("div",{className:"mt-4",children:[a.jsxDEV("h4",{className:"text-md font-medium text-gray-700",children:"Subject"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:291,columnNumber:23},this),a.jsxDEV("p",{className:"mt-1 text-sm text-gray-900",children:N.subject},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:292,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:290,columnNumber:21},this),a.jsxDEV("div",{className:"mt-4",children:[a.jsxDEV("h4",{className:"text-md font-medium text-gray-700",children:"Message"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:298,columnNumber:23},this),a.jsxDEV("div",{className:"mt-1 p-3 bg-gray-50 rounded-md",children:a.jsxDEV("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:N.message},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:300,columnNumber:25},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:299,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:297,columnNumber:21},this),!N.responded&&a.jsxDEV("div",{className:"mt-6",children:a.jsxDEV("button",{onClick:()=>(async e=>{try{C(!0);const a=await fetch(`/api/admin/contacts/${e}/respond`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include"}),s=await a.json();s.success?(m(n.map(a=>a._id===e?{...a,responded:!0}:a)),N&&N._id===e&&x({...N,responded:!0})):u(s.message||"Failed to update contact")}catch(a){console.error("Error updating contact:",a),u("Failed to connect to the server")}finally{C(!1)}})(N._id),disabled:A,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm",children:A?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"animate-spin mr-2",children:"⟳"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:315,columnNumber:31},this)," Updating..."]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:314,columnNumber:29},this):a.jsxDEV(a.Fragment,{children:[a.jsxDEV(d,{className:"mr-2"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:319,columnNumber:31},this)," Mark as Responded"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:318,columnNumber:29},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:308,columnNumber:25},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:307,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:273,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:269,columnNumber:17},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:268,columnNumber:15},this),a.jsxDEV("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[a.jsxDEV("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:()=>b(!1),children:"Close"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:329,columnNumber:17},this),a.jsxDEV("a",{href:`mailto:${N.email}?subject=Re: ${N.subject}`,className:"mt-3 mr-2 w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Reply via Email"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:336,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:328,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:267,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:264,columnNumber:11},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:263,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminContacts.jsx",lineNumber:147,columnNumber:5},this)}function A({setUser:s}){const[i,n]=e.useState({email:"",password:""}),[m,r]=e.useState(""),[o,c]=e.useState(!1),d=e=>{n({...i,[e.target.name]:e.target.value})};return a.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxDEV("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md",children:[a.jsxDEV("div",{className:"text-center",children:[a.jsxDEV("img",{src:"data:image/png;base64,",alt:"Royal Mark Academy Logo",className:"mx-auto h-20 w-auto",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/200x80?text=Royal+Mark+Academy"}},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:54,columnNumber:11},this),a.jsxDEV("h2",{className:"mt-6 text-3xl font-extrabold text-blue-900",children:"Admin Login"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:63,columnNumber:11},this),a.jsxDEV("p",{className:"mt-2 text-sm text-gray-600",children:"Royal Mark Academy Staff Portal"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:64,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:53,columnNumber:9},this),m&&a.jsxDEV("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:a.jsxDEV("div",{className:"flex items-center",children:[a.jsxDEV(t,{className:"text-red-500 mr-2"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:72,columnNumber:15},this),a.jsxDEV("p",{className:"text-red-700 text-sm",children:m},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:73,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:71,columnNumber:13},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:70,columnNumber:11},this),a.jsxDEV("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault(),r(""),c(!0);try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),credentials:"include"}),a=await e.json();a.success?s(a.user):r(a.message||"Login failed")}catch(a){console.error("Login error:",a),r("Failed to connect to the server. Please try again.")}finally{c(!1)}},children:[a.jsxDEV("div",{className:"rounded-md shadow-sm -space-y-px",children:[a.jsxDEV("div",{className:"mb-4",children:[a.jsxDEV("label",{htmlFor:"email",className:"sr-only",children:"Email address"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:81,columnNumber:15},this),a.jsxDEV("div",{className:"relative",children:[a.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsxDEV(l,{className:"h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:84,columnNumber:19},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:83,columnNumber:17},this),a.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i.email,onChange:d,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Email address",disabled:o},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:86,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:82,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:80,columnNumber:13},this),a.jsxDEV("div",{children:[a.jsxDEV("label",{htmlFor:"password",className:"sr-only",children:"Password"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:102,columnNumber:15},this),a.jsxDEV("div",{className:"relative",children:[a.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsxDEV(u,{className:"h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:105,columnNumber:19},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:104,columnNumber:17},this),a.jsxDEV("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i.password,onChange:d,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Password",disabled:o},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:107,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:103,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:79,columnNumber:11},this),a.jsxDEV("div",{children:a.jsxDEV("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 "+(o?"opacity-70 cursor-not-allowed":""),children:o?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:a.jsxDEV("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:132,columnNumber:21},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:131,columnNumber:19},this),"Signing in..."]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:130,columnNumber:17},this):"Sign in"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:124,columnNumber:13},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:123,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:78,columnNumber:9},this),a.jsxDEV("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Return to ",a.jsxDEV("a",{href:"/",className:"font-medium text-blue-800 hover:text-blue-900",children:"School Website"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:144,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:143,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:52,columnNumber:7},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminLogin.jsx",lineNumber:51,columnNumber:5},this)}function C(){const[s,i]=e.useState([]),[n,m]=e.useState(!0),[r,o]=e.useState(""),[c,d]=e.useState(!1),[l,u]=e.useState({name:"",email:"",password:"",role:"staff"}),[y,h]=e.useState({}),[g,f]=e.useState(!1);e.useEffect(()=>{(async()=>{try{const e=await fetch("/api/auth/users",{credentials:"include"}),a=await e.json();a.success?i(a.data||[]):o(a.message||"Failed to fetch users")}catch(e){console.error("Error fetching users:",e),o("Failed to connect to the server")}finally{m(!1)}})()},[]);const v=e=>{const{name:a,value:s}=e.target;u({...l,[a]:s}),y[a]&&h({...y,[a]:""})};return n?a.jsxDEV("div",{className:"flex justify-center items-center py-10",children:a.jsxDEV("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-800"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:136,columnNumber:9},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:135,columnNumber:7},this):a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[a.jsxDEV("h2",{className:"text-xl font-bold text-gray-800",children:"User Management"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:144,columnNumber:9},this),a.jsxDEV("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-900 flex items-center",children:[a.jsxDEV(N,{className:"mr-2"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:149,columnNumber:11},this)," Add User"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:145,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:143,columnNumber:7},this),r&&a.jsxDEV("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:a.jsxDEV("div",{className:"flex items-center",children:[a.jsxDEV(t,{className:"text-red-500 mr-2"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:156,columnNumber:13},this),a.jsxDEV("p",{className:"text-red-700",children:r},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:157,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:155,columnNumber:11},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:154,columnNumber:9},this),a.jsxDEV("div",{className:"overflow-x-auto",children:a.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsxDEV("thead",{className:"bg-gray-50",children:a.jsxDEV("tr",{children:[a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:166,columnNumber:15},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:169,columnNumber:15},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:172,columnNumber:15},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:175,columnNumber:15},this),a.jsxDEV("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:178,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:165,columnNumber:13},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:164,columnNumber:11},this),a.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:0===s.length?a.jsxDEV("tr",{children:a.jsxDEV("td",{colSpan:"5",className:"px-4 py-3 text-center text-sm text-gray-500",children:"No users found. Add a new user to get started."},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:186,columnNumber:17},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:185,columnNumber:15},this):s.map(e=>a.jsxDEV("tr",{className:"hover:bg-gray-50",children:[a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsxDEV("div",{className:"flex items-center",children:[a.jsxDEV("div",{className:"flex-shrink-0 h-8 w-8",children:e.profileImage?a.jsxDEV("img",{className:"h-8 w-8 rounded-full",src:e.profileImage,alt:""},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:197,columnNumber:27},this):a.jsxDEV("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsxDEV(x,{className:"text-blue-800"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:200,columnNumber:29},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:199,columnNumber:27},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:195,columnNumber:23},this),a.jsxDEV("div",{className:"ml-4",children:a.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.name},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:205,columnNumber:25},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:204,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:194,columnNumber:21},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:193,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.email},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:209,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsxDEV("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+("admin"===e.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.role},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:213,columnNumber:21},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:212,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.lastLogin?new Date(e.lastLogin).toLocaleString():"Never"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:219,columnNumber:19},this),a.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:[a.jsxDEV("button",{className:"text-blue-600 hover:text-blue-900 mr-3",title:"Edit user",children:a.jsxDEV(p,{},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:227,columnNumber:23},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:223,columnNumber:21},this),a.jsxDEV("button",{className:"text-red-600 hover:text-red-900",title:"Delete user",children:a.jsxDEV(b,{},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:233,columnNumber:23},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:229,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:222,columnNumber:19},this)]},e.id,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:192,columnNumber:17},this))},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:183,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:163,columnNumber:9},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:162,columnNumber:7},this),c&&a.jsxDEV("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxDEV("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsxDEV("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>d(!1)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:247,columnNumber:13},this),a.jsxDEV("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:248,columnNumber:13},this),a.jsxDEV("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[a.jsxDEV("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:a.jsxDEV("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>d(!1),children:[a.jsxDEV("span",{className:"sr-only",children:"Close"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:256,columnNumber:19},this),a.jsxDEV(j,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:257,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:251,columnNumber:17},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:250,columnNumber:15},this),a.jsxDEV("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[a.jsxDEV("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",id:"modal-title",children:"Add New User"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:261,columnNumber:17},this),a.jsxDEV("form",{onSubmit:async e=>{e.preventDefault();const a=(()=>{const e={};return l.name.trim()||(e.name="Name is required"),l.email.trim()?/\S+@\S+\.\S+/.test(l.email)||(e.email="Email is invalid"):e.email="Email is required",l.password.trim()?l.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",e})();if(Object.keys(a).length>0)h(a);else{f(!0);try{const e=await fetch("/api/auth/create-staff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l),credentials:"include"}),a=await e.json();a.success?(i([...s,a.user]),u({name:"",email:"",password:"",role:"staff"}),d(!1)):o(a.message||"Failed to create user")}catch(n){console.error("Error creating user:",n),o("Failed to connect to the server")}finally{f(!1)}}},children:[a.jsxDEV("div",{className:"mb-4",children:[a.jsxDEV("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:267,columnNumber:21},this),a.jsxDEV("input",{type:"text",name:"name",id:"name",value:l.name,onChange:v,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm "+(y.name?"border-red-500":"border-gray-300")},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:270,columnNumber:21},this),y.name&&a.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:y.name},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:279,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:266,columnNumber:19},this),a.jsxDEV("div",{className:"mb-4",children:[a.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:284,columnNumber:21},this),a.jsxDEV("input",{type:"email",name:"email",id:"email",value:l.email,onChange:v,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm "+(y.email?"border-red-500":"border-gray-300")},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:287,columnNumber:21},this),y.email&&a.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:y.email},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:296,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:283,columnNumber:19},this),a.jsxDEV("div",{className:"mb-4",children:[a.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:301,columnNumber:21},this),a.jsxDEV("input",{type:"password",name:"password",id:"password",value:l.password,onChange:v,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm "+(y.password?"border-red-500":"border-gray-300")},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:304,columnNumber:21},this),y.password&&a.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:y.password},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:313,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:300,columnNumber:19},this),a.jsxDEV("div",{className:"mb-4",children:[a.jsxDEV("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:318,columnNumber:21},this),a.jsxDEV("select",{id:"role",name:"role",value:l.role,onChange:v,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[a.jsxDEV("option",{value:"staff",children:"Staff"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:328,columnNumber:23},this),a.jsxDEV("option",{value:"admin",children:"Administrator"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:329,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:321,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:317,columnNumber:19},this),a.jsxDEV("div",{className:"pt-4 border-t border-gray-200",children:a.jsxDEV("button",{type:"submit",disabled:g,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 "+(g?"opacity-70 cursor-not-allowed":""),children:g?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"animate-spin mr-2",children:"⟳"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:341,columnNumber:27},this)," Creating..."]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:340,columnNumber:25},this):"Create User"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:334,columnNumber:21},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:333,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:265,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:260,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:249,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:246,columnNumber:11},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:245,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/components/admin/AdminUsers.jsx",lineNumber:142,columnNumber:5},this)}function U(){const[s,i]=e.useState(null),[n,m]=e.useState(!0),[r,o]=e.useState("applications");e.useEffect(()=>{(async()=>{try{const e=await fetch("/api/auth/me",{credentials:"include"}),a=await e.json();a.success&&i(a.data)}catch(e){console.error("Auth check error:",e)}finally{m(!1)}})()},[]);return n?a.jsxDEV("div",{className:"min-h-screen flex justify-center items-center bg-gray-100",children:a.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-800"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:50,columnNumber:9},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:49,columnNumber:7},this):s?a.jsxDEV("div",{className:"bg-gray-100 min-h-screen",children:[a.jsxDEV("div",{className:"bg-white shadow-md",children:a.jsxDEV("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[a.jsxDEV("h1",{className:"text-2xl font-bold text-blue-900",children:"Royal Mark Academy Admin"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:63,columnNumber:11},this),a.jsxDEV("div",{className:"flex items-center",children:[a.jsxDEV("div",{className:"mr-4 text-sm text-gray-600",children:[a.jsxDEV("span",{className:"flex items-center",children:[a.jsxDEV(x,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:67,columnNumber:17},this),s.name," | ",s.role]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:66,columnNumber:15},this),a.jsxDEV("span",{className:"flex items-center text-xs",children:[a.jsxDEV(l,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:71,columnNumber:17},this),s.email]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:70,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:65,columnNumber:13},this),a.jsxDEV("button",{onClick:async()=>{try{await fetch("/api/auth/logout",{credentials:"include"}),i(null)}catch(e){console.error("Logout error:",e)}},className:"flex items-center px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded text-sm",children:[a.jsxDEV(y,{className:"mr-1"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:79,columnNumber:15},this)," Logout"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:64,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:62,columnNumber:9},this)},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:61,columnNumber:7},this),a.jsxDEV("div",{className:"container mx-auto px-4 py-6",children:[a.jsxDEV("div",{className:"mb-6 flex border-b border-gray-300",children:[a.jsxDEV("button",{onClick:()=>o("applications"),className:"px-4 py-2 flex items-center "+("applications"===r?"border-b-2 border-blue-800 text-blue-800":"text-gray-600"),children:[a.jsxDEV(h,{className:"mr-2"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:91,columnNumber:13},this)," Applications"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:87,columnNumber:11},this),a.jsxDEV("button",{onClick:()=>o("contacts"),className:"px-4 py-2 flex items-center "+("contacts"===r?"border-b-2 border-blue-800 text-blue-800":"text-gray-600"),children:[a.jsxDEV(g,{className:"mr-2"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:97,columnNumber:13},this)," Contact Messages"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:93,columnNumber:11},this),"admin"===s.role&&a.jsxDEV("button",{onClick:()=>o("users"),className:"px-4 py-2 flex items-center "+("users"===r?"border-b-2 border-blue-800 text-blue-800":"text-gray-600"),children:[a.jsxDEV(x,{className:"mr-2"},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:104,columnNumber:15},this)," Manage Users"]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:100,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:86,columnNumber:9},this),a.jsxDEV("div",{className:"bg-white rounded-lg shadow-md p-6",children:["applications"===r&&a.jsxDEV(f,{userRole:s.role},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:110,columnNumber:44},this),"contacts"===r&&a.jsxDEV(v,{},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:111,columnNumber:40},this),"users"===r&&"admin"===s.role&&a.jsxDEV(C,{},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:112,columnNumber:62},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:109,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:85,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:60,columnNumber:5},this):a.jsxDEV(A,{setUser:i},void 0,!1,{fileName:"/Users/gideonaina/CascadeProjects/royal-mark-academy/src/pages/Admin.jsx",lineNumber:56,columnNumber:12},this)}export{U as default};
